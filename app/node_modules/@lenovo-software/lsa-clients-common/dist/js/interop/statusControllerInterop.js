"use strict";
// Copyright Â© 2023 Lenovo. All rights reserved.
// Confidential and Restricted
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.StatusControllerInterop = void 0;
const pubsub_js_1 = __importDefault(require("pubsub-js"));
const internal_1 = require("../../internal");
class StatusControllerInterop {
    constructor(lsaClient) {
        var _a;
        internal_1.StatusController.updateStatus();
        this._lsaClient = lsaClient;
        this._ssm = internal_1.StudentStatusModel.getInstance();
        (_a = this._lsaClient.getStatusLightImpl()) === null || _a === void 0 ? void 0 : _a.statusNotification(this._ssm);
        pubsub_js_1.default.subscribe('onChromeMessage_ToWebView', (msg, data) => {
            switch (data.message) {
                case 'UI_SetConnectivityStatus': {
                    this.dispatchConnectivityStatusUpdate(data.status);
                    break;
                }
            }
        });
    }
    get getStudentStatus() {
        return this._ssm;
    }
    dispatchCurrentStatus() {
        var _a;
        (_a = this._lsaClient.getStatusLightImpl()) === null || _a === void 0 ? void 0 : _a.statusNotification(this._ssm);
    }
    dispatchConnectivityStatusUpdate(data) {
        this._ssm = internal_1.StudentStatusModel.fromAny(data);
        this.dispatchCurrentStatus();
    }
}
exports.StatusControllerInterop = StatusControllerInterop;
//# sourceMappingURL=statusControllerInterop.js.map